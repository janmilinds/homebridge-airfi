{
  "pluginAlias": "Homebridge Airfi",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "required": ["name", "language", "devices"],
    "properties": {
      "name": {
        "title": "Platform name",
        "type": "string",
        "default": "Homebridge Airfi"
      },
      "language": {
        "title": "Language",
        "type": "string",
        "default": "en",
        "oneOf": [
          { "title": "English", "enum": ["en"] },
          { "title": "Finnish", "enum": ["fi"] },
          { "title": "Swedish", "enum": ["sv"] }
        ],
        "description": "Choose the language to display the default accessory names."
      },
      "debug": {
        "title": "Debug",
        "type": "object",
        "properties": {
          "printModbusMap": {
            "title": "Print Modbus map",
            "type": "boolean",
            "default": false,
            "description": "When activated, the Modbus map is printed to the log when the accessory is initialized."
          }
        }
      },
      "devices": {
        "type": "array",
        "minItems": 1,
        "maxItems": 1,
        "items": {
          "title": "Devices",
          "type": "object",
          "properties": {
            "host": {
              "title": "Host",
              "type": "string",
              "format": "ipv4"
            },
            "port": {
              "title": "Port",
              "type": "integer",
              "minimum": 0,
              "maximum": 65535,
              "default": 502
            },
            "model": {
              "title": "Model",
              "type": "string",
              "default": "Model 60",
              "oneOf": [
                { "title": "Model 60", "enum": ["Model 60"] },
                { "title": "Model 100", "enum": ["Model 100"] },
                { "title": "Model 130", "enum": ["Model 130"] },
                { "title": "Model 150", "enum": ["Model 150"] },
                { "title": "Model 250", "enum": ["Model 250"] },
                { "title": "Model 350", "enum": ["Model 350"] }
              ]
            },
            "serialNumber": {
              "title": "Serial number",
              "type": "string",
              "pattern": "^\\d{5,10}$"
            },
            "exposeBoostedCoolingSwitch": {
              "title": "Expose Boosted cooling switch",
              "type": "boolean",
              "default": false,
              "description": "When activated, the unit monitors temperatures and boosts air volumes as needed depending on conditions."
            },
            "exposeFireplaceFunctionSwitch": {
              "title": "Expose Fireplace function switch",
              "type": "boolean",
              "default": false,
              "description": "Creates an overpressure for 30 min."
            },
            "exposeSaunaFunctionSwitch": {
              "title": "Expose Sauna function switch",
              "type": "boolean",
              "default": false,
              "description": "Prevents ventilation power increase for 30 min when unit detects sudden increase in humidity."
            }
          },
          "required": ["host", "port", "model", "serialNumber"]
        }
      }
    }
  },
  "layout": [
    {
      "type": "section",
      "items": ["name", "language"]
    },
    {
      "key": "devices",
      "type": "array",
      "orderable": false,
      "buttonText": "Add air handling unit",
      "items": [
        "devices[].host",
        {
          "key": "devices[].port",
          "type": "number"
        },
        "devices[].model",
        "devices[].serialNumber",
        {
          "key": "devices[]",
          "title": "Air handling unit features",
          "type": "section",
          "expandable": true,
          "expanded": false,
          "items": [
            "devices[].exposeSaunaFunctionSwitch",
            "devices[].exposeFireplaceFunctionSwitch",
            "devices[].exposeBoostedCoolingSwitch"
          ]
        }
      ]
    }
  ]
}